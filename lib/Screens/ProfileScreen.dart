// import 'dart:io';
// import 'package:flutter/material.dart';
// import 'package:flutter/services.dart';
// import 'package:image_picker/image_picker.dart';
// class ProfileScreen extends StatefulWidget {
//   @override
//   _ProfileScreenState createState() => _ProfileScreenState();
// }
//
// class _ProfileScreenState extends State<ProfileScreen> {
//   File? myimage;
//   @override
//   Widget build(BuildContext context) {
//     return Scaffold(
//       appBar: AppBar(
//         title: Text("Profile"),
//       ),
//       body: Center(
//         child: ListView(
//           children: <Widget>[
//             // CircleAvatar(
//             //   radius: 60,
//             //   backgroundImage:NetworkImage('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQkQNstTrRmsutZfduCqOBbr9QMPsLbKHVT5K-tQ_nf4w&s'),
//             //   child: Stack(
//             //     children: <Widget>[
//             //       Positioned(
//             //         bottom: 3,
//             //         right: 140.5,
//             //         child: IconButton(
//             //           icon: Icon(Icons.edit),
//             //           onPressed: () {
//             //             // Add logic to handle image upload
//             //           },
//             //         ),
//             //       ),
//             //     ],
//             //   ),
//             // ),
//             InkWell(
//               onTap: (){
//                 // pickImage();
//               },
//               child: CircleAvatar(
//                 child: Icon(Icons.camera_alt_outlined),
//                 radius: 80,
//                 backgroundImage: NetworkImage('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQkQNstTrRmsutZfduCqOBbr9QMPsLbKHVT5K-tQ_nf4w&s'),
//               ),
//             ),
//             SizedBox(height: 20),
//             ProfileTextField(label: 'Username', initialValue: 'Abhishek Joshi'),
//             ProfileTextField(label: 'Phone Number', initialValue: '+1234567890'),
//             ProfileTextField(label: 'Email', initialValue: 'abhishek@gmail.com'),
//             ProfileTextField(label: 'Password', initialValue: '12345', obscureText: true),
//             ProfileTextField(label: 'Address', initialValue: 'IT Park Nagpur , Maharashtra , India'),
//             Container(
//               width: double.infinity,
//               height: 50,
//               margin: EdgeInsets.symmetric(horizontal: 50.0,vertical: 8.0),
//               decoration: BoxDecoration(
//                 borderRadius: BorderRadius.all(Radius.circular(14.0)),
//                 color: Colors.grey.shade600
//               ),
//               child: Center(child: Text("Save",style: TextStyle(fontWeight: FontWeight.bold,fontSize: 25),)),
//             )
//           ],
//         ),
//       ),
//     );
//   }
//
//   // Future pickImage() async{
//   //
//   //    try{
//   //      final image =  await ImagePicker().pickImage(source: ImageSource.camera);
//   //      if(image==null){
//   //        return;
//   //      }
//   //      final imagetemporary = File(image.path);
//   //      myimage = imagetemporary;
//   //      setState(() {
//   //        myimage=imagetemporary;
//   //      });
//   //    }on PlatformException catch(e){
//   //      print("Failed To Load Image");
//   //    }
//   // }
// }
//
// class ProfileTextField extends StatelessWidget {
//   final String label;
//   final String initialValue;
//   final bool obscureText;
//
//   const ProfileTextField({
//     Key? key,
//     required this.label,
//     required this.initialValue,
//     this.obscureText = false,
//   }) : super(key: key);
//
//   @override
//   Widget build(BuildContext context) {
//     return Padding(
//       padding: const EdgeInsets.symmetric(horizontal: 20, vertical: 10),
//       child: TextField(
//         decoration: InputDecoration(
//           labelText: label,
//           border: OutlineInputBorder(),
//         ),
//         controller: TextEditingController(text: initialValue),
//         obscureText: obscureText,
//       ),
//     );
//   }
// }


import 'package:flutter/material.dart';
import 'package:pentesting/CommonHelper/BusinessLogic.dart';
import 'package:shared_preferences/shared_preferences.dart';
class ProfileScreen extends StatefulWidget {
   ProfileScreen({super.key});

  @override
  State<ProfileScreen> createState() => _ProfileScreenState();
  final textfieldcontroller = TextEditingController();
}

class _ProfileScreenState extends State<ProfileScreen> {
  BusinessLogic bl = BusinessLogic();
  List  userdatalist=[];

  @override
  Widget build(BuildContext context) {
    getvalues();
    return Scaffold(
      appBar: AppBar(
        title: Text("Profile"),
        actions: [
          IconButton(onPressed: (){
            opendialog();
          }, icon: Icon(Icons.edit))
        ],
      ),
      body: Center(
        child: FutureBuilder(
            future: getvalues(),
            builder: (context,snapshot){
              if(snapshot.hasError){
               print("SOMETHING WENT WRONG ${snapshot.error}");
               return ListView(
                 children: [
                   Image.network('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTx-IWZyD_Nm6PWsdDzY8cerKQTmdplpLJfsw&usqp=CAU'),
                 ],
               );
              }else{
                return ListView(
                  children: [
                    SizedBox(height: 20,),
                    CircleAvatar(radius: 80,),
                    ReUsableListTile(userdatalist[0],Icons.person_outline),
                    ReUsableListTile(userdatalist[1],Icons.email_outlined),
                    ReUsableListTile(userdatalist[2],Icons.phone_outlined),
                    ReUsableListTile(userdatalist[3],Icons.location_city_outlined),
                    ReUsableListTile(userdatalist[4],Icons.password),
                    InkWell(
                      onTap: (){

                      },
                      child: Container(
                        width: double.infinity,
                        height: 50,
                        margin: EdgeInsets.symmetric(horizontal: 50.0,vertical: 8.0),
                        decoration: BoxDecoration(
                            borderRadius: BorderRadius.all(Radius.circular(14.0)),
                            color: Colors.grey.shade600
                        ),
                        child: Center(child: Text("Save",style: TextStyle(fontWeight: FontWeight.bold,fontSize: 25),)),
                      ),
                    )
                  ],
                );
              }
            })
      ),
    );
  }

  ReUsableListTile(String title,IconData icon) {
    return ListTile(
      title: Text(title),
      leading: Icon(icon),
    );
  }

  void opendialog() {
     showDialog(context: context, builder: (context){
      return AlertDialog(
        title: Text("Update"),
        content: Column(
          children: [
            TextField(
            ),
          ],
        ),
        actions: [
          OutlinedButton(onPressed: (){

          }, child: Text("Update")),
          OutlinedButton(onPressed: ()=>Navigator.of(context).pop(), child: Text("Cancel")),
        ],
      );
    });
  }

  Future getvalues() async {
    this.userdatalist.clear();
    final SharedPreferences sp = await SharedPreferences.getInstance();
    userdatalist =  sp.getStringList("userdata")!;
    print("VALUES FROM SHAREDPREFERENCES ${userdatalist}");
  }


}

import 'dart:io';
import 'package:flutter/material.dart';
import 'package:path_provider/path_provider.dart';
import 'package:pdf/widgets.dart' as pw;
import 'package:path/path.dart' as path;
import 'package:image_gallery_saver/image_gallery_saver.dart';


class GeneratePDF{

  Future<void> GenerateAndSavePDF(BuildContext context) async {
    final pdf = pw.Document();

    pdf.addPage(
      pw.Page(
        build: (pw.Context context) {
          return pw.Center(
            child: pw.Text('Hello World', style: pw.TextStyle(fontSize: 40)),
          );
        },
      ),
    );

    final directory = await getApplicationDocumentsDirectory();
    final filePath = path.join(directory.path, 'Receipts', 'File1.pdf');
    final file = File(filePath);

    // Create directory if it doesn't exist
    await Directory(path.dirname(filePath)).create(recursive: true);

    // Save PDF to file
    await file.writeAsBytes(await pdf.save());
    // Save the PDF to the gallery
    // final result = await ImageGallerySaver.saveFile(file.path);
    // print("File saved to gallery: $result");

    // Show popup with file path
    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: Text('PDF Saved'),
          content: Text('PDF generated at: $filePath'),
          actions: <Widget>[
            TextButton(
              onPressed: () {
                Navigator.of(context).pop();
              },
              child: Text('OK'),
            ),
          ],
        );
      },
    );
  }


}
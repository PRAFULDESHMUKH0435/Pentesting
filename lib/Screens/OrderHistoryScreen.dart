import 'package:flutter/material.dart';
import 'package:flutter_spinkit/flutter_spinkit.dart';
import 'package:hive/hive.dart';
import 'package:intl/intl.dart';
import 'package:pentesting/CommonHelper/BusinessLogic.dart';

import '../CommonHelper/SingleMyOrderHistoryContainer.dart';
class OrderHistoryScreen extends StatefulWidget {
  const OrderHistoryScreen({super.key});

  @override
  State<OrderHistoryScreen> createState() => _OrderHistoryScreenState();
}

class _OrderHistoryScreenState extends State<OrderHistoryScreen> {


  BusinessLogic bl = BusinessLogic();


  @override
  Widget build(BuildContext context) {

    bl.GetOrderHistoryList();
    return Scaffold(
      appBar: AppBar(
        title: Text("Order History"),
      ),
      body:FutureBuilder(
        future: bl.GetOrderHistoryList(),
        builder: (context,snapshot){
          if(snapshot.connectionState == ConnectionState.waiting){
            return SpinKitHourGlass(color: Colors.green);
          }else{
            return  ListView.builder(
                itemCount: bl.orderhistorylist.length,
                itemBuilder: (context,index){
                  return SingleMyOrderHistoryContainer(
                    Date: bl.orderhistorylist[index][0],
                    Total: bl.orderhistorylist[index][1].toString(),
                    Discount: bl.orderhistorylist[index][2].toString(),
                    Payable: bl.orderhistorylist[index][3].toString(),
                    itemslist: bl.orderhistorylist[index][4],
                  );
                });
          }
        },
      ),

    );
  }
}
